<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="һ��OIer�����ļ�¼"><title>2017.10.19模拟赛总结 | Steven's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">2017.10.19模拟赛总结</h1><a id="logo" href="/.">Steven's Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">2017.10.19模拟赛总结</h1><div class="post-meta">Oct 19, 2017<span> | </span><span class="category"><a href="/categories/总结/">总结</a><a href="/categories/总结/题解/">题解</a></span></div><div class="post-content"><p><strong>整体总结：</strong><br>没什么可总结的，失误还是太多，还需控制。还有就是有想法一定要打，一定要有信心。今天的得分还是太低了，这样考noip的话那岂不是gg了？毕竟今天这一套还比noip稍微简单一些，所以说还是要努力啊！</p>
<p><strong>题目链接：</strong><a href="https://www.zybuluo.com/stevenzheng2002/note/921214" target="_blank" rel="external">https://www.zybuluo.com/stevenzheng2002/note/921214</a></p>
<p><strong>题目调试：</strong></p>
<p><strong>T1：</strong></p>
<p><strong>题意：</strong></p>
<p>小 N 在打天梯的时候经常发现自己错斩，所以想请你写个程序帮帮他。<br>假设你本回合有 N 个随从可以攻击，其中第 i 个随从的攻击力为 A[i]。对手剩余生命<br>值为 HP，并有 M 个具有嘲讽的随从，其中第 i 个随从的生命值为 B[i]。这些随从都没有异<br>能。现在你的手牌已经打空了，你只能试图使用你的随从斩杀对手。<br>每次你可以选择一个你未攻击过的随从攻击对手的英雄或随从，注意你必须先消灭所<br>有具有嘲讽的敌方随从才能攻击敌方英雄，每次攻击后对手的随从或英雄将会受到等同于<br>你随从攻击力的伤害。攻击后若对手的随从生命值 ≤ 0，该随从死亡；若对手英雄生命值<br>≤ 0，则你获得游戏胜利。<br>请你告诉小 N 他本回合是否能斩杀对手。</p>
<p><strong>分析：</strong></p>
<p>这道题的数据范围十分的小，所以直接暴力枚举自己的每张卡打对方的哪张卡。</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REP(i, n) for(int i = 1; i &lt;= n; i ++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REPG(i, x) for(int i = head[x]; i; i = g[i].nxt)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(x, y) memset(x, y, sizeof(x));</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> DB;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">Max</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &gt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> m, n, hp;</div><div class="line"><span class="keyword">int</span> a[MAXN], b[MAXN], c[MAXN], cnt[MAXN];</div><div class="line"><span class="keyword">bool</span> flag = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"ending.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"ending.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pd</span><span class="params">()</span></span>&#123;										<span class="comment">//检验 </span></div><div class="line">	<span class="keyword">int</span> gg = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++) cnt[i] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(cnt[c[i]] &lt; b[c[i]]) cnt[c[i]] += a[i];</div><div class="line">		<span class="keyword">else</span> gg += a[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++) <span class="keyword">if</span>(b[i] &gt; cnt[i]) <span class="keyword">return</span> ;</div><div class="line">	<span class="keyword">if</span>(gg &lt; hp) <span class="keyword">return</span> ;</div><div class="line">	flag = <span class="number">1</span>; <span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(flag) <span class="keyword">return</span> ;</div><div class="line">	<span class="keyword">if</span>(j == n)&#123;pd(); <span class="keyword">return</span> ;&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		c[j] = i;</div><div class="line">		find(j + <span class="number">1</span>);</div><div class="line">		<span class="keyword">if</span>(flag) <span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">	m = read(), n = read(), hp = read();</div><div class="line">	<span class="keyword">int</span> sumn = <span class="number">0</span>, summ = <span class="number">0</span>;</div><div class="line">	REP(i, m) b[i] = read(), summ += b[i];</div><div class="line">	REP(i, n)&#123;</div><div class="line">		a[i] = read(), sumn += a[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(summ + hp &gt; sumn)&#123;<span class="built_in">printf</span>(<span class="string">"No\n"</span>); <span class="keyword">return</span> ;&#125;	<span class="comment">//特判 </span></div><div class="line">	<span class="keyword">if</span>(m &gt;= n)&#123;<span class="built_in">printf</span>(<span class="string">"No\n"</span>); <span class="keyword">return</span> ;&#125;			<span class="comment">//特判 </span></div><div class="line">	find(<span class="number">0</span>); 										<span class="comment">//深搜 </span></div><div class="line">	<span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</div><div class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	fre();</div><div class="line">	init();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调试前：100</p>
<p>调试后：100</p>
<p><strong>T2：</strong></p>
<p><strong>题意：</strong></p>
<p>精灵王国有N座美丽的城市，它们以一个环形排列在Bzeroth的大陆上。其中第i座城市到第i+1座城市花费的时间为d[i]。特别地，第N座城市到第1座城市花费的时间为d[N]。</p>
<p>另外，精灵们在数千年的时间里建造了M座传送门，第i座传送门连接了城市u[i]与城市v[i]，并且需要花费t[i]的时间通过（可能有两座传送门连接了同一对城市，也有可能一座传送门连接了相同的两座城市）。</p>
<p>小S是精灵王国交通部部长，她的职责是为精灵女王设计每年的巡查路线。每次陛下会从某一个城市到达另一个城市，沿路调查每个城市的治理情况，她需要找出一条用时最短的路线。</p>
<p><strong>分析：</strong></p>
<p>这道题显然是个多源最短路，然而我们不能直接用floyd来求。然后我们又注意到它最开始给了一个n个点的环，然后在此基础上加的边最多只有m条，所涉及的点最多只有40个点，40个点跑floyd还是撑得住的。。。</p>
<p>在此之上，其他的点怎么办呢？很显然，任意两个点都是能互相到达的，如果对于某一次的询问u到v在floyd的40个点没有出现或者不能互相到达的话，我们就只能比较n个点的大环上的两点之间的最短距离了，这个就是u到v的最短路径。所以我们最开始先预处理出来的d数组的前缀和，这样求环上距离的时候比较好求。然后如果u到v在floyd算法下有答案，那么我们就需要把这个值和u到v的环上距离作一下比较，较小值即为答案。</p>
<p><strong>wzj的题解：</strong></p>
<p>通过一些观察可得：节点u到节点v的最短路肯定为以下两种情况之一：</p>
<p>1、不经过额外的m条边直接从u到v。</p>
<p>2、从u先走到某个为额外边端点的x，再从x走到某个同样为额外边端点的y，最后从y走到v。</p>
<p>预处理所有额外边的端点间两两最短路，询问时暴力枚举x、y更新答案即可。</p>
<p>时间复杂度：$O(N+M^3+Q\times M^2)$</p>
<p>期望得分：100分</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REP(i, n) for(LL i = 1; i &lt;= n; i ++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REPG(i, x) for(LL i = head[x]; i; i = g[i].nxt)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(x, y) memset(x, y, sizeof(x));</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> DB;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">Max</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &gt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> LL MAXN = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXX = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line">LL f[MAXX][MAXX], s[MAXN], d[MAXN], p[MAXN], fl[MAXN], l[MAXN], r[MAXN];</div><div class="line">LL n, m, cnt = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	LL r = <span class="number">0</span>, z = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">cal</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(x &gt; y) swap(x, y);</div><div class="line">	<span class="keyword">return</span> Min(s[y] - s[x], s[x] + s[n + <span class="number">1</span>] - s[y]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i ++) <span class="keyword">if</span>(p[i] == x) <span class="keyword">return</span> i;</div><div class="line">	p[++ cnt] = x;</div><div class="line">	<span class="keyword">return</span> cnt;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">doit</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fu, <span class="keyword">int</span> v, <span class="keyword">int</span> fv)</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> cal(u, p[fu]) + cal(v, p[fv]) + f[fu][fv];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"travel.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"travel.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">	n = read(), m = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m * <span class="number">2</span>; i ++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m * <span class="number">2</span>; j ++) f[i][j] = <span class="number">1e22</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) d[i] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n + <span class="number">1</span>; i ++) s[i] = s[i - <span class="number">1</span>] + d[i - <span class="number">1</span>];</div><div class="line">	<span class="comment">//前缀和 </span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		LL u = find(read()), v = find(read()), dis = read();</div><div class="line">		f[u][v] = f[v][u] = Min(dis, f[u][v]);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//加边建新图 </span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i ++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; j ++)&#123;</div><div class="line">			f[i][j] = Min(f[i][j], cal(p[i], p[j]));</div><div class="line">		&#125;</div><div class="line">	<span class="comment">//初始化 </span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= cnt; k ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i ++)&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; j ++) f[i][j] = min(f[i][j], f[i][k] + f[k][j]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//floyd</span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i ++) fl[p[i]] = i;</div><div class="line">	<span class="keyword">int</span> gg = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n * <span class="number">2</span>; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> hh = (i &lt;= n ? i : i - n);</div><div class="line">		<span class="keyword">if</span>(fl[hh]) l[hh] = fl[hh];</div><div class="line">		<span class="keyword">else</span> l[hh] = gg;</div><div class="line">		gg = l[hh];</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//找左边离这个点最近的在m条边中的点 </span></div><div class="line">	gg = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = n * <span class="number">2</span>; i &gt;= <span class="number">1</span>; i --)&#123;</div><div class="line">		<span class="keyword">int</span> hh = (i &lt;= n ? i : i - n);</div><div class="line">		<span class="keyword">if</span>(fl[hh]) r[hh] = fl[hh];</div><div class="line">		<span class="keyword">else</span> r[hh] = gg;</div><div class="line">		gg = r[hh];</div><div class="line">	&#125;</div><div class="line">	<span class="comment">////找右边离这个点最近的在m条边中的点</span></div><div class="line">	<span class="keyword">int</span> q = read();</div><div class="line">	<span class="keyword">while</span>(q --)&#123;</div><div class="line">		<span class="keyword">int</span> u = read(), v = read();</div><div class="line">		LL ans = cal(u, v);</div><div class="line">		</div><div class="line">		<span class="keyword">if</span>(l[u])&#123;</div><div class="line">			ans = Min(ans, doit(u, l[u], v, r[v]));</div><div class="line">			ans = Min(ans, doit(u, l[u], v, l[v]));</div><div class="line">			ans = Min(ans, doit(u, r[u], v, l[v]));</div><div class="line">			ans = Min(ans, doit(u, r[u], v, r[v]));</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//找最小值 </span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	fre();</div><div class="line">	init();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>数组初始化一定要开大点，否则就真的gg了，我当时就因为这个调了老半天。。。</p>
<p>调试前：0（初始化的inf太小了，导致没拿到分。。。）</p>
<p>调试后：100</p>
<p><strong>T3：</strong></p>
<p><strong>题意：</strong></p>
<p>精灵女王得到了一串价值连城的珠链，但这条珠链太长了，她下令让珠宝师小D加工。</p>
<p>小D被要求将这串珠链划分成K段小珠链，每段小珠链必须编号连续，要求划分的段数K在L到R之间。这串珠链是由N个魔法石打造而成的，第i个魔法石的魔力值为A[i]，而一串小珠链的魔力值M[i]为其包含的若干魔法石的魔力值异或(XOR)和（即M[i] = A[l] ^ A[l+1] ^ …… ^ A[r]）。</p>
<p>精灵女王想让这若干条小珠链的魔力值与(AND)和最大(即Ans= M[1] &amp; M[2] &amp; …… &amp; M[K])，你能帮帮小D吗?</p>
<p><strong>分析：</strong></p>
<p>这道题显然是一道dp（但貌似贪心还能过80分呢！）</p>
<p>我们发现dp时每次相当于将一个左移一位的bool数组和另一个bool数组取或，使用bitset优化转移即可。</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> dwn(i,s,t) for(int i=s;i&gt;=t;i--) </span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,s,t) for(int i=s;i&lt;=t;i++)</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> c=getchar();</div><div class="line">	<span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(c);c=getchar()) <span class="keyword">if</span>(c==<span class="string">'-'</span>) f=<span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(;<span class="built_in">isdigit</span>(c);c=getchar()) x=x*<span class="number">10</span>+c-<span class="string">'0'</span>;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1610</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">int</span> n,A,B;</div><div class="line"><span class="built_in">bitset</span>&lt;maxn&gt;f[maxn];</div><div class="line"><span class="keyword">int</span> t,S[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</div><div class="line">	f[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">	rep(i,<span class="number">1</span>,n) &#123;</div><div class="line">		f[i]=<span class="number">0</span>;</div><div class="line">		rep(j,<span class="number">0</span>,i<span class="number">-1</span>) <span class="keyword">if</span>(((S[i]^S[j])|t)==(S[i]^S[j])) f[i]|=f[j];</div><div class="line">		f[i]&lt;&lt;=<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	rep(i,A,B) <span class="keyword">if</span>(f[n][i+<span class="number">1</span>]) <span class="keyword">return</span> i;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"split.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"split.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	n=read();A=read();B=read();</div><div class="line">	rep(i,<span class="number">1</span>,n) S[i]=S[i<span class="number">-1</span>]^read();</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	dwn(i,<span class="number">30</span>,<span class="number">0</span>) &#123;</div><div class="line">		t^=(<span class="number">1</span>&lt;&lt;i);</div><div class="line">		<span class="keyword">if</span>(check()) ans^=(<span class="number">1</span>&lt;&lt;i);</div><div class="line">		<span class="keyword">else</span> t^=(<span class="number">1</span>&lt;&lt;i);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调试前：50</p>
<p>调试后：50</p>
<p>现在还是不太明白t3，思路是懂了，bitset不太会，先学学bitset吧。</p>
<p><strong>注意：</strong>dp的状态如果是前i个数，分j段能取到的最大的与和是错的，因为<strong>最大的and and起来不一定能使与和最大</strong>，如果普通dp的话，那么就是前i个数，分j段，与和是否能等于k。</p>
<p><strong>心得与体会：</strong>今天还是犯了不少的错误，最大的错误就是t2想到了接近标算的东西却选择没有打，下次还要努力啊！（套路话）</p>
<p><strong>另：</strong></p>
<p>事实证明，我昨天所定制的计划并没有完成。。。调题调了一个晚上（其实还是做了一些其他的题，但是跟tarjan好像毛关系都没有，所以说我打算明天下午的时候做一下）。。。</p>
</div><div class="tags"><a href="/tags/图论/">图论</a><a href="/tags/暴力/">暴力</a><a href="/tags/动态规划/">动态规划</a><a href="/tags/最短路/">最短路</a></div><div class="post-nav"><a href="/2017/10/22/2017-10-22模拟赛总结/" class="pre">2017.10.22模拟赛总结</a><a href="/2017/10/18/2017-10-18刷题总结/" class="next">2017.10.18刷题总结</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'stevenzheng2002',
  repo: 'stevenzheng2002.top',
  oauth: {
    client_id: '43e13b2dd2149976c8a6',
    client_secret: '69a321e325cb4064a2ed3afdb43a0fca83d62ac7',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://stevenzheng2002.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/题解/">题解</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/知识点/">知识点</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/题解/">题解</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/题解/总结/">总结</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/图论/" style="font-size: 15px;">图论</a> <a href="/tags/Tarjan/" style="font-size: 15px;">Tarjan</a> <a href="/tags/组合数学/" style="font-size: 15px;">组合数学</a> <a href="/tags/暴力/" style="font-size: 15px;">暴力</a> <a href="/tags/动态规划/" style="font-size: 15px;">动态规划</a> <a href="/tags/最小生成树/" style="font-size: 15px;">最小生成树</a> <a href="/tags/最近公共祖先/" style="font-size: 15px;">最近公共祖先</a> <a href="/tags/最短路/" style="font-size: 15px;">最短路</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/背包问题/" style="font-size: 15px;">背包问题</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/22/2017-10-21刷题总结/">2017.10.21刷题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/22/2017-10-22模拟赛总结/">2017.10.22模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/19/2017-10-19模拟赛总结/">2017.10.19模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/18/2017-10-18刷题总结/">2017.10.18刷题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/洛谷2835-刻录光盘-题解/">洛谷2835 刻录光盘 题解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/2017-10-17模拟赛总结/">2017.10.17模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/16/bzoj1977-次小生成树-题解/">bzoj1977 次小生成树 题解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/POJ1679-The-Unique-Tree-题解/">POJ1679 The Unique Tree 题解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/次小生成树/">次小生成树</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/09/洛谷P1941-飞扬的小鸟-题解/">洛谷P1941 飞扬的小鸟 题解</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.csdn.net/zhengzheng2002" title="stevenzheng2002's csdn blog" target="_blank">stevenzheng2002's csdn blog</a><ul></ul><a href="https://olleh.co/" title="Stevenzx's blog" target="_blank">Stevenzx's blog</a><ul></ul><a href="http://blog.csdn.net/wyj_jenny/" title="Kumii's blog" target="_blank">Kumii's blog</a><ul></ul><a href="http://blog.csdn.net/heheyh123/" title="CJR's blog" target="_blank">CJR's blog</a><ul></ul><a href="http://blog.csdn.net/qq_40512553/" title="HYH's blog" target="_blank">HYH's blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Steven's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>