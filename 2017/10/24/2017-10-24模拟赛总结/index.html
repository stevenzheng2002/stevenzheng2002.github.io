<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="һ��OIer�����ļ�¼"><title>2017.10.24模拟赛总结 | Steven's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">2017.10.24模拟赛总结</h1><a id="logo" href="/.">Steven's Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">2017.10.24模拟赛总结</h1><div class="post-meta">Oct 24, 2017<span> | </span><span class="category"><a href="/categories/题解/">题解</a><a href="/categories/题解/总结/">总结</a></span></div><div class="post-content"><h4 id="整体总结："><a href="#整体总结：" class="headerlink" title="整体总结："></a>整体总结：</h4><p>就这成绩，考个屁NOIP啊！</p>
<h4 id="题目链接：https-www-zybuluo-com-stevenzheng2002-note-926361"><a href="#题目链接：https-www-zybuluo-com-stevenzheng2002-note-926361" class="headerlink" title="题目链接：https://www.zybuluo.com/stevenzheng2002/note/926361"></a>题目链接：<a href="https://www.zybuluo.com/stevenzheng2002/note/926361" target="_blank" rel="external">https://www.zybuluo.com/stevenzheng2002/note/926361</a></h4><h4 id="题目调试："><a href="#题目调试：" class="headerlink" title="题目调试："></a>题目调试：</h4><p><strong>T1：</strong></p>
<p><strong>分析：</strong></p>
<p>先排序并枚举最小边，在次小边不断增大的同时， two pointers维护最大边的可选区间的右端点，每次累加区间长度即可。（就是这么简单，然而辣鸡的zzf做了40min）</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REP(i, n) for(int i = 1; i &lt;= n; i ++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REPG(i, x) for(int i = head[x]; i; i = g[i].nxt)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(x, y) memset(x, y, sizeof(x));</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> DB;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">Max</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &gt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">5e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">int</span> a[MAXN];</div><div class="line">LL C[MAXN][MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"tri.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"tri.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read();</div><div class="line">	<span class="comment">/*</span></div><div class="line"><span class="comment">	C[1][0] = 1;</span></div><div class="line"><span class="comment">	for(int i = 1; i &lt;= n; i ++)&#123;</span></div><div class="line"><span class="comment">		for(int j = 1; j &lt;= n; j ++)&#123;</span></div><div class="line"><span class="comment">			C[j][i] = C[j - 1][i - 1] + C[j][i - 1];</span></div><div class="line"><span class="comment">		&#125;</span></div><div class="line"><span class="comment">	&#125;</span></div><div class="line"><span class="comment">	*/</span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) a[i] = read();</div><div class="line">	<span class="keyword">if</span>(n &lt; <span class="number">3</span>)&#123;<span class="built_in">printf</span>(<span class="string">"0\n"</span>); <span class="keyword">return</span> ;&#125;</div><div class="line">	LL ans = <span class="number">0</span>;</div><div class="line">	sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> p = i + <span class="number">2</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j ++)&#123;</div><div class="line">			<span class="keyword">int</span> tot = a[i] + a[j], tmp;</div><div class="line">			<span class="keyword">while</span>(a[p] &lt; tot &amp;&amp; p &lt;= n) p ++;</div><div class="line">			tmp = p - <span class="number">1</span>; p --;</div><div class="line">			<span class="keyword">if</span>(tmp &gt; j &amp;&amp; tmp &lt;= n) ans += tmp - j;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	fre();</div><div class="line">	init();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调试前得分：100</p>
<p>调试后得分：100</p>
<p><strong>T2：</strong></p>
<p><strong>分析：</strong></p>
<p>先线性筛求出每个数的欧拉函数，并统计每个函数值出现了多少次作为权值。考虑不断把集合划分成（01）两个，直到最后每个集合都是单个元素，这个过程等价于给每个元素分配一个互不为前缀的01串，每次按照串的对应位来划分。于是一个函数值被分配到的串的位数就是此策略下猜到该值的步数，而总的期望就相当于所有函数值的串长乘权值的和，这是一个经典的哈夫曼树模型。</p>
<p>以上是题解给出的。我再说一说我自己的看法。我觉得这个不一定非说跟哈夫曼树有多大的关系，我觉得顶多就是用了用哈夫曼编码及其性质。我们可以把它看成一个二叉树，我觉得这样会更好理解一点。然后显然某个点的深度d就是猜的次数，然后就差不多了。</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REP(i, n) for(int i = 1; i &lt;= n; i ++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REPG(i, x) for(int i = head[x]; i; i = g[i].nxt)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(x, y) memset(x, y, sizeof(x));</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> DB;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">Max</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &gt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e7</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n, cn, pr[MAXN / <span class="number">10</span>], isp[MAXN], phi[MAXN];</div><div class="line"><span class="keyword">int</span> sum[MAXN];</div><div class="line">priority_queue &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">doit</span><span class="params">()</span></span>&#123;</div><div class="line">	cn = <span class="number">0</span>; isp[<span class="number">1</span>] = <span class="number">0</span>; phi[<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i ++) isp[i] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(isp[i]) pr[++ cn] = i, phi[i] = i - <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cn; j ++)&#123;</div><div class="line">			<span class="keyword">if</span>(i * pr[j] &gt; n) <span class="keyword">break</span>;</div><div class="line">			isp[i * pr[j]] = <span class="number">0</span>;</div><div class="line">			<span class="keyword">if</span>(i % pr[j]) phi[i * pr[j]] = phi[i] * (pr[j] - <span class="number">1</span>);</div><div class="line">			<span class="keyword">else</span>&#123;</div><div class="line">				phi[i * pr[j]] = phi[i] * pr[j];</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"rnd.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"rnd.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">	n = read();</div><div class="line">	doit();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) sum[phi[i]] ++;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) <span class="keyword">if</span>(sum[i]) q.push(- sum[i]);</div><div class="line">	LL ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> t = q.top(); q.pop();</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		t += q.top(); q.pop();</div><div class="line">		ans += t; q.push(t);</div><div class="line">		t = q.top(); q.pop();</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%.4f\n"</span>, - ans * <span class="number">1.0</span>/ n);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	fre();</div><div class="line">	init();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调试前得分：0</p>
<p>调试后得分：100</p>
<p><strong>T3：</strong></p>
<p><strong>分析：</strong></p>
<p>考虑先手面对一个排列组合方案数（后面简称方案数）为偶数的串，如果有任意一种删除字符的决策能达到先手必败态，那么就删除字符。如果没有，也即删除字符只能达到先手必胜态，就随便重排列一下，此时该串的同构状态已经占用了两个，因为剩余的状态还是偶数个，所以只要在后手继续重排列的同时跟着重排列，就能逼迫后手删除字符而使得自己获胜。所以只要串的方案数是偶数，就是一个先手必胜态。</p>
<p>接下来考虑怎样的串的方案数是奇数。先给出一个结论：令串长为n=a1+a2+…+ak，表示由k种字符组成且第i种字符的出现是ai，显然方案数等于<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4A0B.tmp.jpg" alt="img">，而该式是奇数当且仅当任意ai and aj=0(i≠j)。接下来说明一下：当k=2的时候，式子为<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4A1B.tmp.jpg" alt="img">，利用Lucas定理可以知道该式是奇数当且仅当(a1+a2) and a1=a1，这实际上就是a1 and a2=0。以k=3为例，式子可以写为<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4A1C.tmp.jpg" alt="img">，该式是奇数可依次说明a2 and a3=0且a1 and (a2+a3)=0，并且实际上在a2 and a3=0的前提下，a2+a3=a2 or a3，于是展开还能得到a1 and a2=0且a1 and a3=0。k&gt;3的时候，可以利用归纳法来说明。并且给出的条件实际上等价于，将n的二进制表达的所有1不重不漏地分配给了ai。</p>
<p>那么当先手面对一个方案数是奇数的串时，重排会使其变为一个等价于方案数是偶数的，也即先手必胜的状态，同时如果删除字符变成方案数是偶数的状态，也是不恰当的决策。但是事实上，一定能将其变为一个方案数仍然是奇数的状态。考虑每种字符出现次数的二进制表达，由于1位没有重复，考虑让最低的1位对应的数减1后，1位仍然不会重复，也即将对应字符删去一个后，就能达到方案数是奇数的状态。因此，双方会不断删除合适的字符知道删光，也即只要考虑当前串长就可以了：奇数先手必胜，偶数后手必胜。</p>
<p>于是考虑统计先手必败态时，只要考虑将每一个偶数m(m&lt;=n)的二进制位分配成k份即可。同时注意到，对于同一种分配，对总答案的贡献还要乘上方案数，即当分配出x时，贡献要预先乘上<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4A1D.tmp.jpg" alt="img">，并且如果最终是对x分配，要把x!乘回去。同时发现其实分配出的非0份数也只有O(logn)份，所以记下非0份的数量t，最后乘上<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4A1E.tmp.jpg" alt="img">即可。注意到求单个m的答案的时候，由于dp时做子集枚举的转移，实际上把更小的m的答案同时求了出来，所以总复杂度还是<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4A2F.tmp.jpg" alt="img">的。</p>
<p><strong>体会：</strong>这道题看上去它比较难（或说是繁琐），实际上它就是比较难，比较繁琐，至少对于我来说是这样的。但是呢，其实我觉得这道题不是那么难想，毕竟考试的时候我已经想的差不多了，就是个别的没有考虑到，然后最要命的是，<strong>不会打！！！</strong>这比较尴尬，也不能说是完全不会打，就是。。。打不出来，不知道该怎么打好。</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REP(i, n) for(LL i = 1; i &lt;= n; i ++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REPG(i, x) for(LL i = head[x]; i; i = g[i].nxt)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(x, y) memset(x, y, sizeof(x));</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> DB;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">Max</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &gt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> LL MAXN = <span class="number">1e5</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> LL MOD = <span class="number">1e9</span> + <span class="number">7</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> f[MAXN], gg[MAXN];</div><div class="line"><span class="keyword">int</span> dp[MAXN][<span class="number">20</span>], ans = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fre</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"fun.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"fun.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> b = MOD - <span class="number">2</span>, ret = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(b)&#123;</div><div class="line">		<span class="keyword">if</span>(b &amp; <span class="number">1</span>) ret = (<span class="number">1l</span>l * ret * x) % MOD;</div><div class="line">		x = (<span class="number">1l</span>l * x * x) % MOD;</div><div class="line">		b &gt;&gt;= <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read(), k = read();</div><div class="line">	f[<span class="number">0</span>] = gg[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= max(n, k); i ++)&#123;</div><div class="line">		f[i] = (<span class="number">1l</span>l * f[i - <span class="number">1</span>] * i) % MOD;</div><div class="line">		gg[i] = calc(f[i]);</div><div class="line">	&#125;</div><div class="line">	dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= (n &gt;&gt; <span class="number">1</span>); i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= min(k, <span class="number">16</span>); j ++)&#123;</div><div class="line">			<span class="keyword">int</span> x = i;</div><div class="line">			<span class="keyword">while</span>(x)&#123;</div><div class="line">				dp[i][j] = (dp[i][j] + <span class="number">1l</span>l * gg[x &lt;&lt; <span class="number">1</span>] * dp[i ^ x][j - <span class="number">1</span>]) % MOD;</div><div class="line">				x = (x - <span class="number">1</span>) &amp; i;</div><div class="line">			&#125;</div><div class="line">			ans = (ans + <span class="number">1l</span>l * dp[i][j] * f[i &lt;&lt; <span class="number">1</span>] % MOD * f[k] % MOD * gg[j] % MOD * gg[k - j]) % MOD;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> tmp = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(n --) tmp = (<span class="number">1l</span>l * (tmp + <span class="number">1</span>) * k) % MOD;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (tmp - ans + MOD) % MOD);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	fre();</div><div class="line">	init();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调试前得分：0</p>
<p>调试后得分：100</p>
<p><strong>失败只是暂时停止成功，假如我不能，我就一定要；假如我要，我就一定能!</strong></p>
</div><div class="tags"><a href="/tags/动态规划/">动态规划</a><a href="/tags/数据结构/">数据结构</a><a href="/tags/暴力/">暴力</a><a href="/tags/博弈论/">博弈论</a></div><div class="post-nav"><a href="/2017/10/26/2017-10-26模拟赛总结/" class="pre">2017.10.26模拟赛总结</a><a href="/2017/10/22/2017-10-21刷题总结/" class="next">2017.10.21刷题总结</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'stevenzheng2002',
  repo: 'stevenzheng2002.top',
  oauth: {
    client_id: '43e13b2dd2149976c8a6',
    client_secret: '69a321e325cb4064a2ed3afdb43a0fca83d62ac7',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://stevenzheng2002.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/题解/">题解</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/知识点/">知识点</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/题解/">题解</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/题解/总结/">总结</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/平衡树/" style="font-size: 15px;">平衡树</a> <a href="/tags/图论/" style="font-size: 15px;">图论</a> <a href="/tags/最近公共祖先/" style="font-size: 15px;">最近公共祖先</a> <a href="/tags/最短路/" style="font-size: 15px;">最短路</a> <a href="/tags/快速幂/" style="font-size: 15px;">快速幂</a> <a href="/tags/动态规划/" style="font-size: 15px;">动态规划</a> <a href="/tags/树形动规/" style="font-size: 15px;">树形动规</a> <a href="/tags/最小生成树/" style="font-size: 15px;">最小生成树</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/暴力/" style="font-size: 15px;">暴力</a> <a href="/tags/组合数学/" style="font-size: 15px;">组合数学</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/Tarjan/" style="font-size: 15px;">Tarjan</a> <a href="/tags/背包问题/" style="font-size: 15px;">背包问题</a> <a href="/tags/博弈论/" style="font-size: 15px;">博弈论</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/26/2017-10-26模拟赛总结/">2017.10.26模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/24/2017-10-24模拟赛总结/">2017.10.24模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/22/2017-10-21刷题总结/">2017.10.21刷题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/22/2017-10-22模拟赛总结/">2017.10.22模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/19/2017-10-19模拟赛总结/">2017.10.19模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/18/2017-10-18刷题总结/">2017.10.18刷题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/洛谷2835-刻录光盘-题解/">洛谷2835 刻录光盘 题解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/2017-10-17模拟赛总结/">2017.10.17模拟赛总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/16/bzoj1977-次小生成树-题解/">bzoj1977 次小生成树 题解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/POJ1679-The-Unique-Tree-题解/">POJ1679 The Unique Tree 题解</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.csdn.net/zhengzheng2002" title="stevenzheng2002's csdn blog" target="_blank">stevenzheng2002's csdn blog</a><ul></ul><a href="https://olleh.co/" title="Stevenzx's blog" target="_blank">Stevenzx's blog</a><ul></ul><a href="http://blog.csdn.net/wyj_jenny/" title="Kumii's blog" target="_blank">Kumii's blog</a><ul></ul><a href="http://blog.csdn.net/heheyh123/" title="CJR's blog" target="_blank">CJR's blog</a><ul></ul><a href="http://blog.csdn.net/qq_40512553/" title="HYH's blog" target="_blank">HYH's blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Steven's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>