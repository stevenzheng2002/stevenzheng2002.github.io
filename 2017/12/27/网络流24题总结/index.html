<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />


<script>
    (function(){
        if('password'){
            if (prompt('请输入文章密码') !== 'password'){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>



  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.3">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.3" color="#222">





  <meta name="keywords" content="网络流," />










<meta name="description" content="网络流的建模确实不是很容易。但是通过这次刷题，我觉得网络流的建图都得基于以下两点： 1.我们想要（求）什么 2.我们需要保证什么条件 只要这个想清楚了，我觉得至少应付这24题应该是没什么问题（纯口hu）我当然不知道这24道题属于什么难度啦 题外话：貌似这里面掺杂了一些最短路、分层图之类的问题，然后我就没（不）有（会）做，所以这里面的总结当然不会是24道全的啦 loj有网络流24题系列，可以上loj">
<meta name="keywords" content="网络流">
<meta property="og:type" content="article">
<meta property="og:title" content="网络流24题总结">
<meta property="og:url" content="http://stevenzheng2002.top/2017/12/27/网络流24题总结/index.html">
<meta property="og:site_name" content="Steven&#39;s Blog">
<meta property="og:description" content="网络流的建模确实不是很容易。但是通过这次刷题，我觉得网络流的建图都得基于以下两点： 1.我们想要（求）什么 2.我们需要保证什么条件 只要这个想清楚了，我觉得至少应付这24题应该是没什么问题（纯口hu）我当然不知道这24道题属于什么难度啦 题外话：貌似这里面掺杂了一些最短路、分层图之类的问题，然后我就没（不）有（会）做，所以这里面的总结当然不会是24道全的啦 loj有网络流24题系列，可以上loj">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://stevenzheng2002.top/2017/12/27/网络流24题总结/explanation.png">
<meta property="og:updated_time" content="2017-12-28T12:45:14.093Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网络流24题总结">
<meta name="twitter:description" content="网络流的建模确实不是很容易。但是通过这次刷题，我觉得网络流的建图都得基于以下两点： 1.我们想要（求）什么 2.我们需要保证什么条件 只要这个想清楚了，我觉得至少应付这24题应该是没什么问题（纯口hu）我当然不知道这24道题属于什么难度啦 题外话：貌似这里面掺杂了一些最短路、分层图之类的问题，然后我就没（不）有（会）做，所以这里面的总结当然不会是24道全的啦 loj有网络流24题系列，可以上loj">
<meta name="twitter:image" content="http://stevenzheng2002.top/2017/12/27/网络流24题总结/explanation.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://stevenzheng2002.top/2017/12/27/网络流24题总结/"/>





  <title>网络流24题总结 | Steven's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0a19f594c598c2b2fd59c89abb97ffaa";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/stevenzheng2002"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Steven's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://stevenzheng2002.top/2017/12/27/网络流24题总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="stevenzheng2002">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Steven's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">网络流24题总结</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-27T21:07:04+08:00">
                2017-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/刷题总结/" itemprop="url" rel="index">
                    <span itemprop="name">刷题总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  13,032
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  68
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>网络流的建模确实不是很容易。但是通过这次刷题，我觉得网络流的建图都得基于以下两点：</p>
<p>1.我们想要（求）什么</p>
<p>2.我们需要保证什么条件</p>
<p>只要这个想清楚了，我觉得至少应付这24题应该是没什么问题（纯口hu）<del>我当然不知道这24道题属于什么难度啦</del></p>
<p>题外话：貌似这里面掺杂了一些最短路、分层图之类的问题，然后我就没（不）有（会）做，所以这里面的总结当然不会是24道全的啦</p>
<p>loj有网络流24题系列，可以上loj做。</p>
<h1 id="1-搭配飞行员"><a href="#1-搭配飞行员" class="headerlink" title="1.搭配飞行员"></a>1.搭配飞行员</h1><h2 id="题意："><a href="#题意：" class="headerlink" title="题意："></a>题意：</h2><p>飞行大队有若干个来自各地的驾驶员，专门驾驶一种型号的飞机，这种飞机每架有两个驾驶员，需一个正驾驶员和一个副驾驶员。由于种种原因，例如相互配合的问题，有些驾驶员不能在同一架飞机上飞行，问如何搭配驾驶员才能使出航的飞机最多。</p>
<p>因为驾驶工作分工严格,两个正驾驶员或两个副驾驶员都不能同机飞行。</p>
<p>2≤n≤100</p>
<h2 id="题解："><a href="#题解：" class="headerlink" title="题解："></a>题解：</h2><p>二分图最大匹配瞎搞。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">115</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e4</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, n, m, cur[MAXN], s, t, d[MAXN];</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z; </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	q.push(s); d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(g[i].c, flow));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c -= tmp;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dinic</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans += dfs(s, INF);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(), m = read(); s = n + <span class="number">1</span>, t = n + <span class="number">2</span>;</div><div class="line">	<span class="keyword">int</span> x, y;</div><div class="line">	<span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;x, &amp;y)) add_edge(x, y, <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++) add_edge(s, i, <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = m + <span class="number">1</span>; i &lt;= n; i ++) add_edge(i, t, <span class="number">1</span>);</div><div class="line">	dinic();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="2-太空飞行计划"><a href="#2-太空飞行计划" class="headerlink" title="2.太空飞行计划"></a>2.太空飞行计划</h1><h2 id="题意：-1"><a href="#题意：-1" class="headerlink" title="题意："></a>题意：</h2><p>W 教授正在为国家航天中心计划一系列的太空飞行。每次太空飞行可进行一系列商业性实验而获取利润。现已确定了一个可供选择的实验集合，和进行这些实验需要使用的全部仪器的集合。</p>
<p>W 教授的任务是找出一个有效算法，确定在一次太空飞行中要进行哪些实验并因此而配置哪些仪器才能使太空飞行的净收益最大。这里净收益是指进行实验所获得的全部收入与配置仪器的全部费用的差额。</p>
<p>对于给定的实验和仪器配置情况，编程找出净收益最大的试验计划。</p>
<h2 id="题解：-1"><a href="#题解：-1" class="headerlink" title="题解："></a>题解：</h2><p>显然的最大权闭合图，然后它要输出方案，我们dfs一下残量网络即可。</p>
<p>其实有更好的方法，就是直接判断最后一次bfs中，哪些点的d数组的值不为-1即可。</p>
<h2 id="代码：-1"><a href="#代码：-1" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">115</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e4</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], cur[MAXN], m, n, s, t, dd[MAXN], len = <span class="number">0</span>;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> vis[MAXN &lt;&lt; <span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	d[s] = <span class="number">0</span>; q.push(s);</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(flow, g[i].c));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">if</span>(!(i % <span class="number">2</span>) &amp;&amp; g[i].c)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(!vis[v])&#123;dd[++ len] = v; vis[v] = <span class="number">1</span>;&#125;</div><div class="line">			dfs1(v);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	m = read(), n = read(); s = n + m + <span class="number">1</span>, t = n + m + <span class="number">2</span>;</div><div class="line">	<span class="keyword">int</span> tot = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> w, x; <span class="keyword">char</span> ch; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w);</div><div class="line">		tot += w; add_edge(s, i, w);</div><div class="line">		<span class="keyword">do</span> &#123;</div><div class="line">    		ch = getchar();</div><div class="line">    		<span class="keyword">if</span>(ch == <span class="string">'\n'</span> || ch == <span class="string">'\r'</span> || ch == EOF) <span class="keyword">break</span>;</div><div class="line">   			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</div><div class="line">   			add_edge(i, m + x, INF);</div><div class="line">		&#125;<span class="keyword">while</span>(ch != <span class="string">'\n'</span> &amp;&amp; ch != <span class="string">'\r'</span> &amp;&amp; ch != EOF);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = m + <span class="number">1</span>; i &lt;= m + n; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> w = read(); add_edge(i, t, w);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans += dfs(s, INF);</div><div class="line">	&#125;</div><div class="line">	dfs1(s);</div><div class="line">	sort(dd + <span class="number">1</span>, dd + len + <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(~d[i]) <span class="built_in">printf</span>(<span class="string">"%d "</span>, i);</div><div class="line">	&#125;<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = m + <span class="number">1</span>; i &lt;= m + n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(~d[i]) <span class="built_in">printf</span>(<span class="string">"%d "</span>, i - m);</div><div class="line">	&#125;<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, tot - ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="3-最小路径覆盖"><a href="#3-最小路径覆盖" class="headerlink" title="3.最小路径覆盖"></a>3.最小路径覆盖</h1><h2 id="题意：-2"><a href="#题意：-2" class="headerlink" title="题意："></a>题意：</h2><p>点不能相交的有向图的最小路径覆盖。</p>
<h2 id="题解：-2"><a href="#题解：-2" class="headerlink" title="题解："></a>题解：</h2><p>我们这样想：</p>
<p>如果每个点都单独成一条路径的话，我们需要n条路径覆盖。</p>
<p>如果有两个点连到了一起，我们就能减少一条路径。</p>
<p>如果再有两个点连到了一起，我们就又能减少一条路径。</p>
<p>所以，我们可以把这个有向图转化成一个二分图，具体转可以看代码。</p>
<p>然后跑一边最大匹配，n-最大匹配即为答案。</p>
<h2 id="代码：-2"><a href="#代码：-2" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e4</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], n, m, s, t, cur[MAXN], dd[MAXN];</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> vis[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	d[s] = <span class="number">0</span>; q.push(s);</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(g[i].c, flow));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(tmp)&#123;</div><div class="line">				dd[u] = v;</div><div class="line">				<span class="keyword">if</span>(v - n &gt; <span class="number">0</span>) vis[v - n] = <span class="number">1</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(), m = read(); s = n * <span class="number">2</span> + <span class="number">1</span>, t = n * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) add_edge(s, i, <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = n + <span class="number">1</span>; i &lt;= n * <span class="number">2</span>; i ++) add_edge(i, t, <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> x = read(), y = read() + n;</div><div class="line">		add_edge(x, y, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n * <span class="number">2</span> + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans += dfs(s, INF);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(vis[i]) <span class="keyword">continue</span>;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>, i);</div><div class="line">		<span class="keyword">int</span> k = i;</div><div class="line">		<span class="keyword">while</span>(dd[k])&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d "</span>, dd[k] - n);</div><div class="line">			k = dd[k] - n;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, n - ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="4-魔术球"><a href="#4-魔术球" class="headerlink" title="4.魔术球"></a>4.魔术球</h1><h2 id="题意：-3"><a href="#题意：-3" class="headerlink" title="题意："></a>题意：</h2><p>假设有 $n$ 根柱子，现要按下述规则在这 $n$ 根柱子中依次放入编号为 $1,2,3,4,⋯$ 的球。</p>
<ol>
<li>每次只能在某根柱子的最上面放球。</li>
<li>在同一根柱子中，任何 $2$ 个相邻球的编号之和为完全平方数。</li>
</ol>
<p>试设计一个算法，计算出在 $n$ 根柱子上最多能放多少个球。</p>
<h2 id="题解：-3"><a href="#题解：-3" class="headerlink" title="题解："></a>题解：</h2><p>这道题还是比较简单的。我们枚举答案，然后跑最大流看看可不可行，输出方案跟上一题差不多。</p>
<p>（我的方案输出写的好像有些问题呀。。。不过居然过了。。。）</p>
<h2 id="代码：-3"><a href="#代码：-3" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], dd[MAXN], cur[MAXN], n, s, t, tt[MAXN];</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> vis[MAXN], vis1[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	d[s] = <span class="number">0</span>; q.push(s);</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(g[i].c, flow));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(tmp)&#123;</div><div class="line">				dd[u] = v;</div><div class="line">				<span class="keyword">if</span>(v - n &gt; <span class="number">0</span>) vis[v - <span class="number">5015</span>] = <span class="number">1</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(); <span class="keyword">int</span> ans = <span class="number">0</span>, need = <span class="number">0</span>; s = <span class="number">8014</span>, t = <span class="number">8015</span>;</div><div class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</div><div class="line">		ans ++; need ++;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; ans; i ++)&#123;</div><div class="line">			<span class="keyword">if</span>(<span class="built_in">sqrt</span>(i + ans) == (<span class="keyword">int</span>)<span class="built_in">sqrt</span>(i + ans)) add_edge(i, ans + <span class="number">5015</span>, <span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">		add_edge(s, ans, <span class="number">1</span>); add_edge(ans + <span class="number">5015</span>, t, <span class="number">1</span>);</div><div class="line">		<span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>(bfs())&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">8015</span>; i ++) cur[i] = head[i];</div><div class="line">			need -= dfs(s, INF);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(need == n)</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= ans; i ++) tt[i] = dd[i], vis1[i] = vis[i];</div><div class="line">		<span class="keyword">if</span>(need &gt; n) <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans - <span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; ans; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(vis1[i]) <span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">int</span> k = i; <span class="built_in">printf</span>(<span class="string">"%d "</span>, i);</div><div class="line">		<span class="keyword">while</span>(tt[k])&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d "</span>, tt[k] - <span class="number">5015</span>);</div><div class="line">			k = tt[k] - <span class="number">5015</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="5-圆桌聚餐"><a href="#5-圆桌聚餐" class="headerlink" title="5. 圆桌聚餐"></a>5. 圆桌聚餐</h1><h2 id="题意：-4"><a href="#题意：-4" class="headerlink" title="题意："></a>题意：</h2><p>假设有来自 $n$ 个不同单位的代表参加一次国际会议。每个单位的代表数分别为 $r_i$ 。会议餐厅共有 $m$ 张餐桌，每张餐桌可容纳 $c_i$ 个代表就餐。<br>为了使代表们充分交流，希望从同一个单位来的代表不在同一个餐桌就餐。</p>
<p>试设计一个算法，给出满足要求的代表就餐方案。</p>
<h2 id="题解：-4"><a href="#题解：-4" class="headerlink" title="题解："></a>题解：</h2><p>这道题我们的第一个任务就是判断是否存在可行解。</p>
<p>我们这样建图：</p>
<p>s到每个公司连一条边，容量为$r_i$</p>
<p>每个餐桌到t连一条边，容量为$c_i$</p>
<p>每个公司向所有的餐桌各连一条边，容量为$1$</p>
<p>跑最大流即可，判断一下最大流是否是总人数，是的话1，不是的话0</p>
<p>再考虑如何输出方案。</p>
<p>这个方案最好输出了！直接dfs每个公司到每个餐桌的连边，看看哪条边等于零了，就说明这个公司有代表坐在了这个餐桌上。</p>
<h2 id="代码：-4"><a href="#代码：-4" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], cur[MAXN], r[MAXN], c[MAXN], m, n, s, t;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	q.push(s); d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(flow, g[i].c));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(!flow) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>); <span class="keyword">int</span> tot = <span class="number">0</span>;</div><div class="line">	m = read(), n = read(); s = m + n + <span class="number">1</span>, t = m + n + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		r[i] = read(); tot += r[i];</div><div class="line">		add_edge(s, i, r[i]);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++) add_edge(i, j + m, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		c[i] = read();</div><div class="line">		add_edge(i + m, t, c[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m + n + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans += dfs(s, INF);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(ans != tot)&#123;<span class="built_in">printf</span>(<span class="string">"0\n"</span>); <span class="keyword">return</span> ;&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"1\n"</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = head[i]; ~j; j = g[j].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[j].to;</div><div class="line">			<span class="keyword">if</span>(v != s &amp;&amp; !g[j].c) <span class="built_in">printf</span>(<span class="string">"%d "</span>, v - m);</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="6-最长递增子序列"><a href="#6-最长递增子序列" class="headerlink" title="6.最长递增子序列"></a>6.最长递增子序列</h1><h2 id="题意：-5"><a href="#题意：-5" class="headerlink" title="题意："></a>题意：</h2><p>给定正整数序列 $x_1∼x_n$，以下递增子序列均为<strong>非严格</strong>递增。</p>
<ol>
<li>计算其最长递增子序列的长度 $s$ 。</li>
<li>计算从给定的序列中最多可取出多少个长度为 $s$ 的递增子序列。</li>
<li>如果允许在取出的序列中多次使用 $x_1$ 和 $x_n$，则从给定序列中最多可取出多少个长度为 $s$ 的递增子序列。</li>
</ol>
<h2 id="题解：-5"><a href="#题解：-5" class="headerlink" title="题解："></a>题解：</h2><p>我们一问一问考虑。</p>
<p>第一问：因为n小于等于500，$n^2$的dp即可。</p>
<p>第二问：这一问显然就要用到网络流了。我们要拆点（为什么？因为我们要控制一个点只选了1次），并在这两个拆出来的点连一条容量为1的边。然后呢？</p>
<p>如果f[i]==ans1的话，那么从s到i的入点连一条容量为1的边。</p>
<p>如果f[i]==1的话，那么从i的出点到t连一条容量为1的边。</p>
<p>如果a[j]&gt;=a[i] &amp;&amp; j &gt; i &amp;&amp; f[j] == f[i] + 1（<strong>少一个条件都不可以！！！</strong>），那么从j的出点向i的入点连一条容量为1的边。</p>
<p>跑个最大流就成了。</p>
<p>第三问：把(s, 1), (1, 1), (s, n), (n, n), (1, t), (n, t)的容量改为INF（如果之前这两点有连边的话）。</p>
<h2 id="代码：-5"><a href="#代码：-5" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], cur[MAXN], n, s, t, a[MAXN], f[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	q.push(s); d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(flow, g[i].c));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(!flow) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(); s = n * <span class="number">2</span> + <span class="number">1</span>, t = n * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) a[i] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; f[i] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j ++)</div><div class="line">			<span class="keyword">if</span>(a[i] &gt;= a[j]) f[i] = max(f[i], f[j] + <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans1 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) ans1 = max(ans1, f[i]);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans1); <span class="keyword">if</span>(ans1 == <span class="number">1</span>)&#123;<span class="built_in">printf</span>(<span class="string">"%d\n%d\n"</span>, n, n); <span class="keyword">return</span> ;&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(f[i] == ans1) add_edge(s, i, <span class="number">1</span>);</div><div class="line">		<span class="keyword">if</span>(f[i] == <span class="number">1</span>) add_edge(i + n, t, <span class="number">1</span>);</div><div class="line">		add_edge(i, i + n, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; j ++) <span class="keyword">if</span>(f[j] == f[i] + <span class="number">1</span>) add_edge(j + n, i, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans2 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n * <span class="number">2</span> + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans2 += dfs(s, INF);</div><div class="line">	&#125;<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans2);</div><div class="line">	cnt = <span class="number">-1</span>; clr(head, <span class="number">-1</span>); clr(cur, <span class="number">-1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(f[i] == ans1) add_edge(s, i, (i == <span class="number">1</span> || i == n) ? INF : <span class="number">1</span>);</div><div class="line">		<span class="keyword">if</span>(f[i] == <span class="number">1</span>) add_edge(i + n, t, (i == <span class="number">1</span> || i == n) ? INF : <span class="number">1</span>);</div><div class="line">		add_edge(i, i + n, (i == <span class="number">1</span> || i == n) ? INF : <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; j ++) <span class="keyword">if</span>(a[j] &gt;= a[i] &amp;&amp; f[j] == f[i] + <span class="number">1</span>) add_edge(j + n, i, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans3 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n * <span class="number">2</span> + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans3 += dfs(s, INF);</div><div class="line">	&#125;<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans3);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="7-试题库"><a href="#7-试题库" class="headerlink" title="7.试题库"></a>7.试题库</h1><h2 id="题意：-6"><a href="#题意：-6" class="headerlink" title="题意："></a>题意：</h2><p>假设一个试题库中有 $n$ 道试题。每道试题都标明了所属类别。同一道题可能有多个类别属性。现要从题库中抽取 $m$ 道题组成试卷。并要求试卷包含指定类型的试题。试设计一个满足要求的组卷算法。</p>
<h2 id="题解：-6"><a href="#题解：-6" class="headerlink" title="题解："></a>题解：</h2><p>这道题我感觉比前几道中的一些还要简单啊。</p>
<p>这个建图很好想：试卷需要的类型向t连一条容量为所需题目数的边；s向每道题连一条容量为1的边（保证每道题都只是用过1次）；每道题向自己所属的类型连一条容量为1的边。</p>
<p>跑最大流即可。</p>
<h2 id="代码：-6"><a href="#代码：-6" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], cur[MAXN], k, n, s, t, r[MAXN], tt[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	q.push(s); d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(flow, g[i].c));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(!flow) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	k = read(), n = read(); <span class="keyword">int</span> m = <span class="number">0</span>; s = n + k + <span class="number">1</span>, t = n + k + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i ++)&#123;</div><div class="line">		r[i] = read(); m += r[i];</div><div class="line">		<span class="keyword">if</span>(r[i]) add_edge(i + n, t, r[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> p = read(); add_edge(s, i, <span class="number">1</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; j ++)&#123;</div><div class="line">			<span class="keyword">int</span> x = read() + n;</div><div class="line">			add_edge(i, x, <span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + k + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans += dfs(s, INF);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(ans != m)&#123;<span class="built_in">printf</span>(<span class="string">"No Solution!\n"</span>); <span class="keyword">return</span> ;&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i ++)&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d:"</span>, i);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = head[i + n]; ~j; j = g[j].nxt)&#123;</div><div class="line">			<span class="keyword">if</span>(j % <span class="number">2</span> &amp;&amp; g[j].c) <span class="built_in">printf</span>(<span class="string">" %d"</span>, g[j].to);</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="8-方格取数"><a href="#8-方格取数" class="headerlink" title="8.方格取数"></a>8.方格取数</h1><h2 id="题意：-7"><a href="#题意：-7" class="headerlink" title="题意："></a>题意：</h2><p>在一个有 $n\times m$ 个方格的棋盘中，每个方格中有一个正整数。</p>
<p>现要从方格中取数，使任意 2 个数所在方格没有公共边，且取出的数的总和最大。试设计一个满足要求的取数算法。</p>
<h2 id="题解：-7"><a href="#题解：-7" class="headerlink" title="题解："></a>题解：</h2><p>这个是一个比较经典的方格类网络流的题。</p>
<p>我们首先要黑白染色，然后我们会发现一个很神奇的事情：相邻两个格子的颜色不一样！</p>
<p>好，接下来s到每个染黑的点连一条容量为格子中的数的边，每个染白的点再向t连一条容量为格子中的数的边。然后相邻的格子（黑-&gt;白）连一条容量为INF的边。</p>
<p>我们把问题转化成了什么呢？最大点权独立集。</p>
<p>点权和-最大流（准确的说好像是点权和-最小割）即可。</p>
<h2 id="代码：-7"><a href="#代码：-7" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, d[MAXN], cur[MAXN], m, n, s, t, a[<span class="number">55</span>][<span class="number">55</span>], mark[<span class="number">55</span>][<span class="number">55</span>];</div><div class="line"><span class="keyword">int</span> dx[<span class="number">5</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</div><div class="line"><span class="keyword">int</span> dy[<span class="number">5</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	q.push(s); d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>&amp; i = cur[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(flow, g[i].c));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(!flow) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	m = read(), n = read(); s = n * m + <span class="number">1</span>, t = n * m + <span class="number">2</span>; <span class="keyword">int</span> tot = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++) mark[i][j] = (i - <span class="number">1</span>) * n + j;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)&#123;</div><div class="line">			a[i][j] = read(); tot += a[i][j];</div><div class="line">			<span class="keyword">if</span>((i + j) % <span class="number">2</span> == <span class="number">0</span>) add_edge(s, mark[i][j], a[i][j]);</div><div class="line">			<span class="keyword">else</span> add_edge(mark[i][j], t, a[i][j]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> x1 = <span class="number">1</span>; x1 &lt;= m; x1 ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> y1 = <span class="number">1</span>; y1 &lt;= n; y1 ++)&#123; <span class="keyword">if</span>((x1 + y1) % <span class="number">2</span> == <span class="number">1</span>) <span class="keyword">continue</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">4</span>; k ++)&#123;</div><div class="line">				<span class="keyword">int</span> x2 = x1 + dx[k], y2 = y1 + dy[k];</div><div class="line">				add_edge(mark[x1][y1], mark[x2][y2], INF);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(bfs())&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n * m + <span class="number">2</span>; i ++) cur[i] = head[i];</div><div class="line">		ans += dfs(s, INF);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, tot - ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="9-餐巾计划："><a href="#9-餐巾计划：" class="headerlink" title="9.餐巾计划："></a>9.餐巾计划：</h1><h2 id="题意：-8"><a href="#题意：-8" class="headerlink" title="题意："></a>题意：</h2><p>一个餐厅在相继的 $n$ 天里，每天需用的餐巾数不尽相同。假设第 $i$ 天需要 $r_i$ 块餐巾。餐厅可以购买新的餐巾，每块餐巾的费用为 $P$ 分；或者把旧餐巾送到快洗部，洗一块需 $M$ 天，其费用为 $F$ 分；或者送到慢洗部，洗一块需 $N$ 天，其费用为 $S$ 分。</p>
<p>每天结束时，餐厅必须决定将多少块脏的餐巾送到快洗部，多少块餐巾送到慢洗部，以及多少块保存起来延期送洗。但是每天洗好的餐巾和购买的新餐巾数之和，要满足当天的需求量。</p>
<p>试设计一个算法为餐厅合理地安排好 $n$ 天中餐巾使用计划,使总的花费最小。</p>
<h2 id="题解：-8"><a href="#题解：-8" class="headerlink" title="题解："></a>题解：</h2><p>终于到费用流了。。。</p>
<p>这个。。。我觉得这道题真的不错（虽说这个系列的题都不错），最好初学者自己想想。</p>
<p><strong>如何建图：</strong></p>
<p>1、从S向每个Xi连一条容量为ri，费用为0的有向边。</p>
<p>2、从每个Yi向T连一条容量为ri，费用为0的有向边。</p>
<p>3、从S向每个Yi连一条容量为无穷大，费用为p的有向边。</p>
<p>4、从每个Xi向Xi+1(i+1&lt;=N)连一条容量为无穷大，费用为0的有向边。</p>
<p>5、从每个Xi向Yi+m(i+m&lt;=N)连一条容量为无穷大，费用为f的有向边。</p>
<p>6、从每个Xi向Yi+n(i+n&lt;=N)连一条容量为无穷大，费用为s的有向边。</p>
<h2 id="代码：-8"><a href="#代码：-8" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2e4</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">2e6</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> LL INF = <span class="number">1e18</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span>LL to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line">LL head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], N, p, m, f, n, s, r[MAXN], S, T, pre[MAXN];</div><div class="line"><span class="built_in">queue</span> &lt;LL&gt; q; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(LL u, LL v, LL c, LL w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(LL u, LL v, LL c, LL w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">    LL r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">    <span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">    <span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r =r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">    <span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">    clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>);</div><div class="line">    <span class="keyword">for</span>(LL i = <span class="number">1</span>; i &lt;= N * <span class="number">2</span> + <span class="number">2</span>; i ++) dist[i] = INF;</div><div class="line">    dist[S] = <span class="number">0</span>; q.push(S); inq[S] = <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">        <span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(LL i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">            <span class="keyword">int</span> v = g[i].to;</div><div class="line">            <span class="keyword">if</span>(g[i].c &lt;= <span class="number">0</span> || dist[u] + g[i].w &gt;= dist[v]) <span class="keyword">continue</span>;</div><div class="line">            dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">            <span class="keyword">if</span>(!inq[v])&#123;q.push(v); inq[v] = <span class="number">1</span>;&#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> pre[T] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">    clr(head, <span class="number">-1</span>);</div><div class="line">    N = read(); S = N * <span class="number">2</span> + <span class="number">1</span>, T = N * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">    p = read(); m = read(), f = read(); n = read(), s = read();</div><div class="line">    <span class="keyword">for</span>(LL i = <span class="number">1</span>; i &lt;= N; i ++)&#123;</div><div class="line">        r[i] = read();</div><div class="line">        add_edge(S, i, r[i], <span class="number">0</span>); add_edge(i + N, T, r[i], <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(LL i = <span class="number">1</span>; i &lt;= N; i ++) add_edge(S, i + N, INF, p);</div><div class="line">    <span class="keyword">for</span>(LL i = <span class="number">1</span>; i &lt; N; i ++) add_edge(i, i + <span class="number">1</span>, INF, <span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span>(LL i = <span class="number">1</span>; i + m &lt;= N; i ++) add_edge(i, i + N + m, INF, f);</div><div class="line">    <span class="keyword">for</span>(LL i = <span class="number">1</span>; i + n &lt;= N; i ++) add_edge(i, i + N + n, INF, s);</div><div class="line">    LL ans = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(spfa())&#123;</div><div class="line">        LL flow = INF;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = T; i != S; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">            flow = Min(flow, g[pre[i]].c);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = T; i != S; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">            g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">        &#125;</div><div class="line">        ans += dist[T] * flow;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    work();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="10-数字梯形"><a href="#10-数字梯形" class="headerlink" title="10.数字梯形"></a>10.数字梯形</h1><h2 id="题意：-9"><a href="#题意：-9" class="headerlink" title="题意："></a>题意：</h2><p>给定一个由 $n$ 行数字组成的数字梯形如下图所示。梯形的第一行有 $m$ 个数字。从梯形的顶部的 $m$ 个数字开始，在每个数字处可以沿左下或右下方向移动，形成一条从梯形的顶至底的路径。</p>
<p>分别遵守以下规则：</p>
<ol>
<li>从梯形的顶至底的 $m$ 条路径互不相交；</li>
<li>从梯形的顶至底的 $m$ 条路径仅在数字结点处相交；</li>
<li>从梯形的顶至底的 $m$ 条路径允许在数字结点相交或边相交。</li>
</ol>
<h2 id="题解：-9"><a href="#题解：-9" class="headerlink" title="题解："></a>题解：</h2><p>这道题有三问，确实都是不错的题。</p>
<p>对于第一问，m条路互不相交也就意味着每个点只经过一次，怎么维护？拆点！</p>
<p>每个点的出点与他下一行的所能到达的两个点连一条容量为1，费用为自己的数值的边。</p>
<p>s与第一行的点的入点连一条容量为1，费用为0的边。</p>
<p>第n行的点的出点与t连一条容量为1，费用为0的边。</p>
<p>跑最大费用最大流。</p>
<p>第二问呢？</p>
<p>第二问意味着不用拆点了。</p>
<p>并且把第n行的点与t的连边改成容量为INF，费用为自己的数值就完了。</p>
<p>第三问呢？</p>
<p>所有的（除了s道第一行的各点的）弧全都改为容量为INF。</p>
<h2 id="代码：-9"><a href="#代码：-9" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], pre[MAXN], m, n, a[MAXN][MAXN], mark[MAXN][MAXN], s, t;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(pre, <span class="number">-1</span>); clr(dist, <span class="number">0xc0</span>); clr(inq, <span class="number">0</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &gt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	m = read(), n = read(); <span class="keyword">int</span> tmp = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; <span class="keyword">int</span> p = m + i - <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; j ++)&#123;</div><div class="line">			a[i][j] = read();</div><div class="line">			tmp ++; mark[i][j] = tmp;</div><div class="line">		&#125;</div><div class="line">	&#125; s = tmp * <span class="number">2</span> + <span class="number">1</span>; t = tmp * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; <span class="keyword">int</span> p = m + i - <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; j ++)&#123;</div><div class="line">			<span class="keyword">if</span>(mark[i + <span class="number">1</span>][j]) add_edge(mark[i][j] + tmp, mark[i + <span class="number">1</span>][j], <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span>(mark[i + <span class="number">1</span>][j + <span class="number">1</span>]) add_edge(mark[i][j] + tmp, mark[i + <span class="number">1</span>][j + <span class="number">1</span>], <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">			add_edge(mark[i][j], mark[i][j] + tmp, <span class="number">1</span>, a[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(s, mark[i][j], <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span>(i == n) add_edge(mark[i][j] + tmp, t, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans1 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans1 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans1);</div><div class="line">	</div><div class="line">	clr(head, <span class="number">-1</span>); cnt = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; <span class="keyword">int</span> p = m + i - <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; j ++)&#123;</div><div class="line">			<span class="keyword">if</span>(mark[i + <span class="number">1</span>][j]) add_edge(mark[i][j], mark[i + <span class="number">1</span>][j], <span class="number">1</span>, a[i][j]);</div><div class="line">			<span class="keyword">if</span>(mark[i + <span class="number">1</span>][j + <span class="number">1</span>]) add_edge(mark[i][j], mark[i + <span class="number">1</span>][j + <span class="number">1</span>], <span class="number">1</span>, a[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(s, mark[i][j], <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span>(i == n) add_edge(mark[i][j], t, INF, a[i][j]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans2 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans2 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans2);</div><div class="line">	</div><div class="line">	clr(head, <span class="number">-1</span>); cnt = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; <span class="keyword">int</span> p = m + i - <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; j ++)&#123;</div><div class="line">			<span class="keyword">if</span>(mark[i + <span class="number">1</span>][j]) add_edge(mark[i][j], mark[i + <span class="number">1</span>][j], INF, a[i][j]);</div><div class="line">			<span class="keyword">if</span>(mark[i + <span class="number">1</span>][j + <span class="number">1</span>]) add_edge(mark[i][j], mark[i + <span class="number">1</span>][j + <span class="number">1</span>], INF, a[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(s, mark[i][j], <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span>(i == n) add_edge(mark[i][j], t, INF, a[i][j]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans3 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans3 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans3);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="11-运输问题"><a href="#11-运输问题" class="headerlink" title="11.运输问题"></a>11.运输问题</h1><h2 id="题意：-10"><a href="#题意：-10" class="headerlink" title="题意："></a>题意：</h2><p>W 公司有 $m$ 个仓库和 $n$ 个零售商店。第 $i$ 个仓库有 $a_i$ 个单位的货物；第 $j$ 个零售商店需要 $b_j$ 个单位的货物。货物供需平衡。从第 $i$ 个仓库运送每单位货物到第 $j$ 个零售商店的费用为 $c_j$。试设计一个将仓库中所有货物运送到零售商店的运输方案，使总运输费用最少。</p>
<h2 id="题解：-10"><a href="#题解：-10" class="headerlink" title="题解："></a>题解：</h2><p>这个。。。太水了吧。。。好像都不用动脑子，瞎搞一搞就好了、</p>
<h2 id="代码：-10"><a href="#代码：-10" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;	</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], pre[MAXN], a[MAXN], b[MAXN], c[MAXN][MAXN], m, n, s, t;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa1</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(dist, <span class="number">0x3f</span>); clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &lt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa2</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(dist, <span class="number">0xc0</span>); clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &gt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	m = read(), n = read(); s = (m + n) * <span class="number">2</span> + <span class="number">1</span>, t = (m + n) * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++) a[i] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++) b[j] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)</div><div class="line">			c[i][j] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123; add_edge(s, i, a[i], <span class="number">0</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)&#123;</div><div class="line">			add_edge(i, j + m, a[i], c[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(j + m, t, b[j], <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans1 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa1())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;flow = min(flow, g[pre[i]].c);&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans1 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans1);</div><div class="line">	</div><div class="line">	clr(head, <span class="number">-1</span>); cnt = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123; add_edge(s, i, a[i], <span class="number">0</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)&#123;</div><div class="line">			add_edge(i, j + m, a[i], c[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(j + m, t, b[j], <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans2 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa2())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;flow = min(flow, g[pre[i]].c);&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans2 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans2);</div><div class="line">	</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="12-分配问题"><a href="#12-分配问题" class="headerlink" title="12.分配问题"></a>12.分配问题</h1><h2 id="题意：-11"><a href="#题意：-11" class="headerlink" title="题意："></a>题意：</h2><p>有 $n$ 件工作要分配给 $n$ 个人做。第 $i$ 个人做第 $j$ 件工作产生的效益为 $c_{i,j}$。试设计一个将 $n$ 件工作分配给 $n$ 个人做的分配方案，使产生的总效益最大。</p>
<h2 id="题解：-11"><a href="#题解：-11" class="headerlink" title="题解："></a>题解：</h2><p>太弱了。。。这尼玛哪用动脑子，简直就是裸的模板啊啊啊</p>
<h2 id="代码：-11"><a href="#代码：-11" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;	</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], pre[MAXN], c[MAXN][MAXN], n, s, t;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa1</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(dist, <span class="number">0x3f</span>); clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &lt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa2</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(dist, <span class="number">0xc0</span>); clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &gt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(); s = n * <span class="number">2</span> + <span class="number">1</span>, t = n * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)</div><div class="line">			c[i][j] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; add_edge(s, i, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)&#123;</div><div class="line">			add_edge(i, j + n, <span class="number">1</span>, c[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(j + n, t, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans1 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa1())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;flow = min(flow, g[pre[i]].c);&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans1 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans1);</div><div class="line">	</div><div class="line">	clr(head, <span class="number">-1</span>); cnt = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123; add_edge(s, i, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)&#123;</div><div class="line">			add_edge(i, j + n, <span class="number">1</span>, c[i][j]);</div><div class="line">			<span class="keyword">if</span>(i == <span class="number">1</span>) add_edge(j + n, t, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans2 = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa2())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;flow = min(flow, g[pre[i]].c);&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans2 += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans2);</div><div class="line">	</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="13-负载平衡"><a href="#13-负载平衡" class="headerlink" title="13.负载平衡"></a>13.负载平衡</h1><h2 id="题意：-12"><a href="#题意：-12" class="headerlink" title="题意："></a>题意：</h2><p>G 公司有 $n$ 个沿铁路运输线环形排列的仓库，每个仓库存储的货物数量不等。如何用最少搬运量可以使 $n$ 个仓库的库存数量相同。搬运货物时，只能在相邻的仓库之间搬运。</p>
<h2 id="题解：-12"><a href="#题解：-12" class="headerlink" title="题解："></a>题解：</h2><p>这个。。。自己看代码吧。以上三题都比较水。</p>
<h2 id="代码：-12"><a href="#代码：-12" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], pre[MAXN], n, s, t, a[MAXN];</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(pre, <span class="number">-1</span>); clr(dist, <span class="number">0x3f</span>); clr(inq, <span class="number">0</span>);</div><div class="line">	dist[s] = <span class="number">0</span>; q.push(s); inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &lt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;q.push(v); inq[v] = <span class="number">1</span>;&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(); s = n + <span class="number">1</span>, t = n + <span class="number">2</span>; <span class="keyword">int</span> tot = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		a[i] = read(); tot += a[i];</div><div class="line">	&#125; tot /= n;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="keyword">if</span>(i != n) add_edge(i, i + <span class="number">1</span>, INF, <span class="number">1</span>);</div><div class="line">		<span class="keyword">else</span> add_edge(i, <span class="number">1</span>, INF, <span class="number">1</span>);</div><div class="line">		<span class="keyword">if</span>(i != <span class="number">1</span>) add_edge(i, i - <span class="number">1</span>, INF, <span class="number">1</span>);</div><div class="line">		<span class="keyword">else</span> add_edge(i, n, INF, <span class="number">1</span>);</div><div class="line">		add_edge(i, t, tot, <span class="number">0</span>);</div><div class="line">		add_edge(s, i, a[i], <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="14-最长-k-可重区间集"><a href="#14-最长-k-可重区间集" class="headerlink" title="14.最长 k 可重区间集"></a>14.最长 k 可重区间集</h1><h2 id="题意：-13"><a href="#题意：-13" class="headerlink" title="题意："></a>题意：</h2><p>网址：<a href="https://loj.ac/problem/6014" target="_blank" rel="external">传送门</a></p>
<h2 id="题解：-13"><a href="#题解：-13" class="headerlink" title="题解："></a>题解：</h2><p>我们不知道这个开区间到底会有多长，所以我们首先肯定要离散化一下。</p>
<p>然后接下来就简单了。由于我们要限制每个点最多只能被覆盖k次，所以我们只给这个网络k的流量，没选一条，就将这段区间的剩余流量-1，具体实现就是i-&gt;i+1连一条容量为INF，费用为0的边；对于备选线段i-&gt;j，我们从i向j连一条容量为1，费用为其长度的边。</p>
<h2 id="代码：-13"><a href="#代码：-13" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], pre[MAXN], n, k, s, t, l[MAXN], r[MAXN], dd[MAXN &lt;&lt; <span class="number">1</span>], len = <span class="number">0</span>, mark[MAXM];</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(inq, <span class="number">0</span>); clr(dist, <span class="number">0xc0</span>); clr(pre, <span class="number">-1</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &gt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(); k = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		l[i] = read(), r[i] = read();</div><div class="line">		<span class="keyword">if</span>(l[i] &gt; r[i]) swap(l[i], r[i]);</div><div class="line">		dd[++ len] = l[i], dd[++ len] = r[i];</div><div class="line">	&#125;</div><div class="line">	sort(dd + <span class="number">1</span>, dd + len + <span class="number">1</span>); s = len + <span class="number">1</span>, t = len + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i ++) mark[dd[i]] = i;</div><div class="line">	add_edge(s, <span class="number">1</span>, k, <span class="number">0</span>); add_edge(len, t, k, <span class="number">0</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i ++) add_edge(i, i + <span class="number">1</span>, INF, <span class="number">0</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		add_edge(mark[l[i]], mark[r[i]], <span class="number">1</span>, r[i] - l[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="15-星际转移"><a href="#15-星际转移" class="headerlink" title="15.星际转移"></a>15.星际转移</h1><h2 id="题意：-14"><a href="#题意：-14" class="headerlink" title="题意："></a>题意：</h2><p>网址：<a href="https://loj.ac/problem/6015" target="_blank" rel="external">传送门</a></p>
<h2 id="题解：-14"><a href="#题解：-14" class="headerlink" title="题解："></a>题解：</h2><p>这个属于<strong>枚举答案，构造网络流判定的问题</strong>，前面好像有一道什么柱子放球的问题，这两个应该是差不多的，只不过这个建图更难一些。</p>
<p>首先判断从地球到月球是否存在一条路线，如果不存在那么无解，否则把每个太空站按照每天拆分成d个点，<i,d>表示第i个站第d天。建立附加源S汇T，顺序枚举答案Day。</i,d></p>
<p>1、对于第Day天，从S到<0,day>连接一条容量为无穷大的有向边。<br>2、从&lt;−1,Day&gt;到T连接一条容量为无穷大的有向边。<br>3、对于第i个太空船，设第Day-1天在a处，第Day天在b处，从<a,day−1>到<b,day>连接一条容量为该太空船容量的有向边。<br>4、对于第i个太空站，从<i,day−1>到<i,day>连接一条容量为无穷大的有向边。<br>5、求当前网络最大流，如果最大流量大于等于地球上人数K，停止枚举，当前Day值就是答案。</i,day></i,day−1></b,day></a,day−1></0,day></p>
<h2 id="代码：-14"><a href="#代码：-14" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e4</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, fa[MAXN], cur[MAXN], d[MAXN], n, m, k, s, t, wgt[MAXN], tt[MAXN], stop[MAXN][MAXN], mark[MAXN][MAXN]; <span class="comment">//mark[i][j]表示第j天太空站（地球：n+1 月球：n+2）i的编号 </span></div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span></span>&#123;add(u, v, c); add(v, u, <span class="number">0</span>);&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getfa</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> x == fa[x] ? x : fa[x] = getfa(fa[x]);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(d, <span class="number">-1</span>);</div><div class="line">	q.push(s); d[s] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == <span class="number">-1</span>)&#123;</div><div class="line">				d[v] = d[u] + <span class="number">1</span>;</div><div class="line">				q.push(v);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> d[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(u == t) <span class="keyword">return</span> flow;</div><div class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(g[i].c &amp;&amp; d[v] == d[u] + <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> tmp = dfs(v, min(g[i].c, flow));</div><div class="line">			flow -= tmp; g[i].c -= tmp;</div><div class="line">			ret += tmp; g[i ^ <span class="number">1</span>].c += tmp;</div><div class="line">			<span class="keyword">if</span>(!flow) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!ret) d[u] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(), m = read(), k = read(); s = <span class="number">0</span>, t = <span class="number">8015</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">2</span>; i ++) fa[i] = i;</div><div class="line">	<span class="keyword">int</span> earth = n + <span class="number">1</span>, moon = n + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		wgt[i] = read(); tt[i] = read(); <span class="keyword">bool</span> flag = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= tt[i]; j ++)&#123;</div><div class="line">			stop[i][j] = read();</div><div class="line">			<span class="keyword">if</span>(stop[i][j] == <span class="number">0</span>) stop[i][j] = earth;</div><div class="line">			<span class="keyword">if</span>(stop[i][j] == <span class="number">-1</span>) stop[i][j] = moon;</div><div class="line">			<span class="keyword">int</span> f1 = getfa(stop[i][<span class="number">1</span>]), f2 = getfa(stop[i][j]);</div><div class="line">			<span class="keyword">if</span>(f1 != f2 &amp;&amp; j != <span class="number">1</span>) fa[f2] = f1;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">int</span> tmp = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">2</span>; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">515</span>; j ++)&#123;</div><div class="line">			tmp ++;</div><div class="line">			mark[i][j] = tmp;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(getfa(earth) != getfa(moon))&#123;<span class="built_in">printf</span>(<span class="string">"0\n"</span>); <span class="keyword">return</span> ;&#125;</div><div class="line">	<span class="keyword">int</span> Day = <span class="number">0</span>, ans = <span class="number">0</span>;</div><div class="line">	add_edge(s, mark[earth][<span class="number">0</span>], INF); add_edge(mark[moon][<span class="number">0</span>], t, INF);</div><div class="line">	<span class="keyword">while</span>(ans &lt; k)&#123; Day ++;</div><div class="line">		add_edge(s, mark[earth][Day], INF); add_edge(mark[moon][Day], t, INF);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">			<span class="keyword">int</span> a = stop[i][(Day - <span class="number">1</span>) % tt[i] + <span class="number">1</span>], b = stop[i][Day % tt[i] + <span class="number">1</span>];</div><div class="line">			add_edge(mark[a][Day - <span class="number">1</span>], mark[b][Day], wgt[i]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) add_edge(mark[i][Day - <span class="number">1</span>], mark[i][Day], INF);</div><div class="line">		<span class="keyword">while</span>(bfs())&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">8015</span>; i ++) cur[i] = head[i];</div><div class="line">			ans += dfs(s, INF);</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, Day);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="16-航空路线问题"><a href="#16-航空路线问题" class="headerlink" title="16.航空路线问题"></a>16.航空路线问题</h1><h2 id="题意：-15"><a href="#题意：-15" class="headerlink" title="题意："></a>题意：</h2><p>给定一张航空图，图中顶点代表城市，边代表两个城市间的直通航线。现要求找出一条满足下述限制条件的且途经城市最多的旅行路线。</p>
<ol>
<li>从最西端城市出发，单向从西向东途经若干城市到达最东端城市，然后再单向从东向西飞回起点（可途经若干城市）。</li>
<li>除起点城市外，任何城市只能访问一次。</li>
</ol>
<p>对于给定的航空图，试设计一个算法找出一条满足要求的最佳航空旅行路线。</p>
<h2 id="题解：-15"><a href="#题解：-15" class="headerlink" title="题解："></a>题解：</h2><p>这个。。。我们看到了任何城市只能访问一次，就知道了这道题肯定是要拆点的。</p>
<p>然后瞎搞不就完了吗。。。</p>
<h2 id="代码：-15"><a href="#代码：-15" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REP(i, a, b) for(int i = a; i &lt;= b; i ++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> REPG(i, x) for(int i = head[x]; i; i = g[i].nxt)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x));</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"></div><div class="line"><span class="function">LL <span class="title">Max</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &gt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">Min</span><span class="params">(LL a, LL b)</span></span>&#123;<span class="keyword">return</span> a &lt; b ? a : b;&#125;</div><div class="line"><span class="function">LL <span class="title">abs</span><span class="params">(LL x)</span></span>&#123;<span class="keyword">return</span> x &gt; <span class="number">0</span> ? x : -x;&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, dist[MAXN], pre[MAXN], n, m, s, t;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q; <span class="keyword">bool</span> inq[MAXN]; <span class="built_in">map</span> &lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; a; <span class="built_in">map</span> &lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt; b;</div><div class="line"><span class="built_in">string</span> ss1[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>); clr(dist, <span class="number">0xc0</span>);</div><div class="line">	q.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q.front(); q.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &gt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(v == t) <span class="keyword">break</span>;</div><div class="line">		<span class="keyword">if</span>(!g[i].c)&#123;</div><div class="line">			<span class="keyword">if</span>(u == <span class="number">1</span> + n) g[i].c = <span class="number">1</span>;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; b[v] &lt;&lt;<span class="built_in">endl</span>;</div><div class="line">			print(v + n);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print2</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">		<span class="keyword">int</span> v = g[i].to;</div><div class="line">		<span class="keyword">if</span>(v == t) <span class="keyword">break</span>;</div><div class="line">		<span class="keyword">if</span>(!g[i].c)&#123;</div><div class="line">			print2(v + n);</div><div class="line">			<span class="keyword">if</span>(b[v] != ss1[n]) <span class="built_in">cout</span> &lt;&lt; b[v] &lt;&lt;<span class="built_in">endl</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	n = read(), m = read(); s = n * <span class="number">2</span> + <span class="number">1</span>, t = n * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; ss1[i];</div><div class="line">		a[ss1[i]] = i; b[i] = ss1[i];</div><div class="line">		<span class="keyword">if</span>(i == <span class="number">1</span> || i == n) add_edge(i, i + n, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">		<span class="keyword">else</span> add_edge(i, i + n, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	add_edge(s, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>); add_edge(n * <span class="number">2</span>, t, <span class="number">2</span>, <span class="number">0</span>); <span class="keyword">int</span> flag = cnt - <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</div><div class="line">		<span class="built_in">string</span> x, y; <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</div><div class="line">		<span class="keyword">int</span> xx = a[x], yy = a[y]; <span class="keyword">if</span>(xx &gt; yy) swap(xx, yy);</div><div class="line">		<span class="keyword">if</span>(xx == <span class="number">1</span> &amp;&amp; yy == n) add_edge(xx + n, yy, <span class="number">2</span>, <span class="number">0</span>); <span class="keyword">else</span> add_edge(a[x] + n, a[y], <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(g[flag].c)&#123;<span class="built_in">printf</span>(<span class="string">"No Solution!\n"</span>); <span class="keyword">return</span> ;&#125;</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;ans - <span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	print(s); print2(s);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="17-深海机器人问题"><a href="#17-深海机器人问题" class="headerlink" title="17.深海机器人问题"></a>17.深海机器人问题</h1><h2 id="题意：-16"><a href="#题意：-16" class="headerlink" title="题意："></a>题意：</h2><p>深海资源考察探险队的潜艇将到达深海的海底进行科学考察。</p>
<p>潜艇内有多个深海机器人。潜艇到达深海海底后，深海机器人将离开潜艇向预定目标移动。</p>
<p>深海机器人在移动中还必须沿途采集海底生物标本。沿途生物标本由最先遇到它的深海机器人完成采集。</p>
<p>每条预定路径上的生物标本的价值是已知的，而且生物标本只能被采集一次。</p>
<p>本题限定深海机器人只能从其出发位置沿着向北或向东的方向移动，而且多个深海机器人可以在同一时间占据同一位置。</p>
<p>用一个 $P\times Q$ 网格表示深海机器人的可移动位置。西南角的坐标为 $(0,0)$，东北角的坐标为$ (Q,P)$。</p>
<p>给定每个深海机器人的出发位置和目标位置，以及每条网格边上生物标本的价值。</p>
<p>计算深海机器人的最优移动方案， 使深海机器人到达目的地后，采集到的生物标本的总价值最高。</p>
<h2 id="题解：-16"><a href="#题解：-16" class="headerlink" title="题解："></a>题解：</h2><p>这道题。。。我很草率的就A了，但是后面的一道题让我思考了良久，下一题再说这个问题是什么。</p>
<p>这道题我没拆点，因为不拆点看起来是对的（自己想想就知道了）。</p>
<p>建图就不说了，挺简单的。</p>
<p>当然，这道题拆点肯定是能做的，甚至这个方法比较好想。</p>
<h2 id="代码：-16"><a href="#代码：-16" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> LF;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span> &lt;LF&gt; cd;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x, y) memset(x, y, sizeof(x))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">15</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e6</span> + <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> to, nxt, c, w;&#125;g[MAXM &lt;&lt; <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN], cnt = <span class="number">-1</span>, pre[MAXN], dist[MAXN], mark[MAXN][MAXN], a, b, p, q, s, t, n, m;</div><div class="line"><span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q1; <span class="keyword">bool</span> inq[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;g[++ cnt] = (Edge)&#123;v, head[u], c, w&#125;; head[u] = cnt;&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span></span>&#123;add(u, v, c, w); add(v, u, <span class="number">0</span>, -w);&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> r = <span class="number">0</span>, z = <span class="number">1</span>; <span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">while</span>(ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch == <span class="string">'-'</span>) z = <span class="number">-1</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)&#123;r = r * <span class="number">10</span> + ch - <span class="string">'0'</span>; ch = getchar();&#125;</div><div class="line">	<span class="keyword">return</span> r * z;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(inq, <span class="number">0</span>); clr(pre, <span class="number">-1</span>); clr(dist, <span class="number">0xc0</span>);</div><div class="line">	q1.push(s); dist[s] = <span class="number">0</span>; inq[s] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!q1.empty())&#123;</div><div class="line">		<span class="keyword">int</span> u = q1.front(); q1.pop(); inq[u] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i = g[i].nxt)&#123;</div><div class="line">			<span class="keyword">int</span> v = g[i].to;</div><div class="line">			<span class="keyword">if</span>(g[i].c &amp;&amp; dist[u] + g[i].w &gt; dist[v])&#123;</div><div class="line">				dist[v] = dist[u] + g[i].w; pre[v] = i;</div><div class="line">				<span class="keyword">if</span>(!inq[v])&#123;inq[v] = <span class="number">1</span>; q1.push(v);&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> pre[t] != <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	clr(head, <span class="number">-1</span>);</div><div class="line">	a = read(), b = read(); p = read() + <span class="number">1</span>, q = read() + <span class="number">1</span>; <span class="keyword">int</span> tmp = <span class="number">0</span>;</div><div class="line">	s = p * q + <span class="number">1</span>, t = p * q + <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= p; i ++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= q; j ++) mark[i][j] = ++ tmp;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= p; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; q; j ++)&#123;</div><div class="line">			<span class="keyword">int</span> x = read();</div><div class="line">			add_edge(mark[i][j], mark[i][j + <span class="number">1</span>], <span class="number">1</span>, x);</div><div class="line">			add_edge(mark[i][j], mark[i][j + <span class="number">1</span>], INF, <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; i ++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; p; j ++)&#123;</div><div class="line">			<span class="keyword">int</span> x = read();</div><div class="line">			add_edge(mark[j][i], mark[j + <span class="number">1</span>][i], <span class="number">1</span>, x);</div><div class="line">			add_edge(mark[j][i], mark[j + <span class="number">1</span>][i], INF, <span class="number">0</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= a; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> k = read(), x = read() + <span class="number">1</span>, y = read() + <span class="number">1</span>;</div><div class="line">		add_edge(s, mark[x][y], k, <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= b; i ++)&#123;</div><div class="line">		<span class="keyword">int</span> k = read(), x = read() + <span class="number">1</span>, y = read() + <span class="number">1</span>;</div><div class="line">		add_edge(mark[x][y], t, k, <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(spfa())&#123;</div><div class="line">		<span class="keyword">int</span> flow = INF;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to) flow = min(flow, g[pre[i]].c);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = t; i != s; i = g[pre[i] ^ <span class="number">1</span>].to)&#123;</div><div class="line">			g[pre[i]].c -= flow; g[pre[i] ^ <span class="number">1</span>].c += flow;</div><div class="line">			ans += flow * g[pre[i]].w;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="18-火星探险问题"><a href="#18-火星探险问题" class="headerlink" title="18.火星探险问题"></a>18.火星探险问题</h1><h2 id="题意：-17"><a href="#题意：-17" class="headerlink" title="题意："></a>题意：</h2><p>火星探险队的登陆舱将在火星表面着陆，登陆舱内有多部障碍物探测车。</p>
<p>登陆舱着陆后，探测车将离开登陆舱向先期到达的传送器方向移动。</p>
<p>探测车在移动中还必须采集岩石标本。</p>
<p>每一块岩石标本由最先遇到它的探测车完成采集。</p>
<p>每块岩石标本只能被采集一次。</p>
<p>岩石标本被采集后，其他探测车可以从原来岩石标本所在处通过。</p>
<p>探测车不能通过有障碍的地面。</p>
<p>本题限定探测车只能从登陆处沿着向南或向东的方向朝传送器移动，而且多个探测车可以在同一时间占据同一位置。</p>
<p>如果某个探测车在到达传送器以前不能继续前进，则该车所采集的岩石标本将全部损失。</p>
<p>用一个 $P\times Q$ 网格表示登陆舱与传送器之间的位置。登陆舱的位置在 $(X_1,Y_1)$ 处，传送器 的位置在 $(X_P,Y_Q)$处。 给定每个位置的状态，计算探测车的最优移动方案，使到达传送器的探测车的数量最多， 而且探测车采集到的岩石标本的数量最多。</p>
<h2 id="题解：-17"><a href="#题解：-17" class="headerlink" title="题解："></a>题解：</h2><p>这道题我最开始也想用和上一题差不多的方法，然而，发现是错的，就是为什么是错的呢？</p>
<p>这种的走格子的如果转化成上一题走边的话，你会发现有一些边加了很多次，所以这显然是错的。拆点做的话，便能很好的限制一条边被算了两次。</p>
<p>如果我们把这道题改改，我们依然走格子，但是权值在边上呢？这时候，我能可以发现，我们把这个图转化成跟上一问差不多的图，是没有问题的，是不会有边算了2次的。</p>
<p>如果没有懂得话，可以结合下面的图看一看。</p>
<p><img src="/2017/12/27/网络流24题总结/explanation.png" alt="explanation"></p>
<h1 id="19-骑士共存问题"><a href="#19-骑士共存问题" class="headerlink" title="19.骑士共存问题"></a>19.骑士共存问题</h1><h2 id="题意：-18"><a href="#题意：-18" class="headerlink" title="题意："></a>题意：</h2><p>在一个 $n\times n$ 个方格的国际象棋棋盘上，马（骑士）可以攻击的棋盘方格如图所示。棋盘上某些方格设置了障碍，骑士不得进入。</p>
<p>对于给定的 n×n\text{n} \times \text{n}n×n 个方格的国际象棋棋盘和障碍标志，计算棋盘上最多可以放置多少个骑士，使得它们彼此互不攻击。</p>
<h2 id="题解：-18"><a href="#题解：-18" class="headerlink" title="题解："></a>题解：</h2><p>这道题又是一个方格问题。首先我们要做的还是染色。染完色后我们发现两个能互相攻击的骑士颜色互不相同，然后有冲突的连边，算最大点独立集即可。</p>
<p><strong>心得</strong>：这次收获还是蛮大的，20道题刷了2.5天，速度还是有些慢了，一天才8道，不过这才刚开始，倒是还能接受。估计这20题也让我把网络流的大部分常见的建模套路全都熟悉了一边，所以说收获真的始挺大的。</p>

      
    </div>
    
    
    

    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

  <!-- JS库 sweetalert 可修改路径 -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">
  <p><span>本文标题:</span><a href="/2017/12/27/网络流24题总结/">网络流24题总结</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 stevenzheng2002 的个人博客">stevenzheng2002</a></p>
  <p><span>发布时间:</span>2017年12月27日 - 21:12</p>
  <p><span>最后更新:</span>2017年12月28日 - 20:12</p>
  <p><span>原始链接:</span><a href="/2017/12/27/网络流24题总结/" title="网络流24题总结">http://stevenzheng2002.top/2017/12/27/网络流24题总结/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://stevenzheng2002.top/2017/12/27/网络流24题总结/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        swal({   
          title: "",   
          text: '复制成功',   
          html: false,
          timer: 500,   
          showConfirmButton: false
        });
      });
    }));  
</script>

      
    </div>

    

    <div>
      
      <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
    </div>

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络流/" <i class="fa fa-tag"></i> 网络流</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/27/混合图求欧拉回路/" rel="next" title="混合图求欧拉回路">
                <i class="fa fa-chevron-left"></i> 混合图求欧拉回路
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/27/网络流拓展/" rel="prev" title="网络流拓展">
                网络流拓展 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.png"
                alt="stevenzheng2002" />
            
              <p class="site-author-name" itemprop="name">stevenzheng2002</p>
              <p class="site-description motion-element" itemprop="description">一个OIer的生涯记录</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/stevenzheng2002" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:stevenzheng2002@163.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://blog.csdn.net/zhengzheng2002" target="_blank" title="CSDN">
                    
                      <i class="fa fa-fw fa-globe"></i>CSDN</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.csdn.net/wyj_jenny/" title="Kumii's Blog" target="_blank">Kumii's Blog</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.csdn.net/tata_d2" title="tata_d2's Blog" target="_blank">tata_d2's Blog</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.csdn.net/zhengzheng2002" title="stevenzheng2002's CSDN Blog" target="_blank">stevenzheng2002's CSDN Blog</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-搭配飞行员"><span class="nav-number">1.</span> <span class="nav-text">1.搭配飞行员</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意："><span class="nav-number">1.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解："><span class="nav-number">1.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码："><span class="nav-number">1.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-太空飞行计划"><span class="nav-number">2.</span> <span class="nav-text">2.太空飞行计划</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-1"><span class="nav-number">2.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-1"><span class="nav-number">2.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-1"><span class="nav-number">2.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-最小路径覆盖"><span class="nav-number">3.</span> <span class="nav-text">3.最小路径覆盖</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-2"><span class="nav-number">3.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-2"><span class="nav-number">3.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-2"><span class="nav-number">3.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-魔术球"><span class="nav-number">4.</span> <span class="nav-text">4.魔术球</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-3"><span class="nav-number">4.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-3"><span class="nav-number">4.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-3"><span class="nav-number">4.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-圆桌聚餐"><span class="nav-number">5.</span> <span class="nav-text">5. 圆桌聚餐</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-4"><span class="nav-number">5.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-4"><span class="nav-number">5.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-4"><span class="nav-number">5.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-最长递增子序列"><span class="nav-number">6.</span> <span class="nav-text">6.最长递增子序列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-5"><span class="nav-number">6.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-5"><span class="nav-number">6.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-5"><span class="nav-number">6.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-试题库"><span class="nav-number">7.</span> <span class="nav-text">7.试题库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-6"><span class="nav-number">7.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-6"><span class="nav-number">7.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-6"><span class="nav-number">7.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-方格取数"><span class="nav-number">8.</span> <span class="nav-text">8.方格取数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-7"><span class="nav-number">8.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-7"><span class="nav-number">8.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-7"><span class="nav-number">8.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-餐巾计划："><span class="nav-number">9.</span> <span class="nav-text">9.餐巾计划：</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-8"><span class="nav-number">9.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-8"><span class="nav-number">9.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-8"><span class="nav-number">9.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-数字梯形"><span class="nav-number">10.</span> <span class="nav-text">10.数字梯形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-9"><span class="nav-number">10.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-9"><span class="nav-number">10.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-9"><span class="nav-number">10.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-运输问题"><span class="nav-number">11.</span> <span class="nav-text">11.运输问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-10"><span class="nav-number">11.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-10"><span class="nav-number">11.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-10"><span class="nav-number">11.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-分配问题"><span class="nav-number">12.</span> <span class="nav-text">12.分配问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-11"><span class="nav-number">12.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-11"><span class="nav-number">12.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-11"><span class="nav-number">12.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-负载平衡"><span class="nav-number">13.</span> <span class="nav-text">13.负载平衡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-12"><span class="nav-number">13.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-12"><span class="nav-number">13.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-12"><span class="nav-number">13.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-最长-k-可重区间集"><span class="nav-number">14.</span> <span class="nav-text">14.最长 k 可重区间集</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-13"><span class="nav-number">14.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-13"><span class="nav-number">14.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-13"><span class="nav-number">14.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15-星际转移"><span class="nav-number">15.</span> <span class="nav-text">15.星际转移</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-14"><span class="nav-number">15.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-14"><span class="nav-number">15.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-14"><span class="nav-number">15.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-航空路线问题"><span class="nav-number">16.</span> <span class="nav-text">16.航空路线问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-15"><span class="nav-number">16.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-15"><span class="nav-number">16.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-15"><span class="nav-number">16.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17-深海机器人问题"><span class="nav-number">17.</span> <span class="nav-text">17.深海机器人问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-16"><span class="nav-number">17.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-16"><span class="nav-number">17.2.</span> <span class="nav-text">题解：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码：-16"><span class="nav-number">17.3.</span> <span class="nav-text">代码：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18-火星探险问题"><span class="nav-number">18.</span> <span class="nav-text">18.火星探险问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-17"><span class="nav-number">18.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-17"><span class="nav-number">18.2.</span> <span class="nav-text">题解：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#19-骑士共存问题"><span class="nav-number">19.</span> <span class="nav-text">19.骑士共存问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意：-18"><span class="nav-number">19.1.</span> <span class="nav-text">题意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题解：-18"><span class="nav-number">19.2.</span> <span class="nav-text">题解：</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">stevenzheng2002</span>

  
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <!-- <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>
-->





<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共98.1k字</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>